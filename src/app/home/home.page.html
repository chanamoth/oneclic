<ion-menu side="start" menuId="first" contentId="main-content">
  <ion-header>
    <ion-toolbar class="toolbar-menu">
      <ion-item lines="none">
        <ion-avatar slot="start">
          <img src="assets/images/user-placeholder.webp" /> <!-- Imagen del usuario -->
        </ion-avatar>
        <ion-label>
          <h2>Mario Jhunior Rojas Chanamoth</h2>
          <p routerLink="/login" (click)="closeMenu()">Mi perfil ></p>
        </ion-label>
      </ion-item>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list>

      <!-- Opción 1 -->
      <ion-item routerLink="/home" lines="none" (click)="closeMenu()">
        <ion-icon name="home-outline" slot="start"></ion-icon>
        <ion-label>Inicio</ion-label>
      </ion-item>

      <!-- Opción 3 -->
      <ion-item routerLink="/notifications" lines="none" (click)="closeMenu()">
        <ion-icon name="notifications-outline" slot="start"></ion-icon>
        <ion-label>Notificaciones</ion-label>
      </ion-item>

      <!-- Opción 4 -->
      <ion-item routerLink="/mis-compras" lines="none">
        <ion-icon name="bag-outline" slot="start"></ion-icon>
        <ion-label>Mis compras</ion-label>
      </ion-item>

      <!-- Opción 5 -->
      <ion-item routerLink="/favorites" lines="none" (click)="closeMenu()">
        <ion-icon name="heart-outline" slot="start"></ion-icon>
        <ion-label>Favoritos</ion-label>
      </ion-item>

      <!-- Opción 6 -->
      <ion-item routerLink="/marketplace" lines="none">
        <ion-icon name="pricetag-outline" slot="start"></ion-icon>
        <ion-label>Marketplace</ion-label>
      </ion-item>

      <!-- Opción 7 -->
      <!--<ion-item routerLink="/mercado-play" lines="none">
        <ion-icon name="play-outline" slot="start"></ion-icon>
        <ion-label>Mercado Play</ion-label>
        <ion-badge color="success" slot="end">GRATIS</ion-badge>
      </ion-item>-->

      <!-- Opción 8 -->
      <ion-item routerLink="/historial" lines="none">
        <ion-icon name="time-outline" slot="start"></ion-icon>
        <ion-label>Historial</ion-label>
      </ion-item>

      <!-- Opción 9 -->
      <ion-item routerLink="/profile" lines="none" (click)="closeMenu()">
        <ion-icon name="person-outline" slot="start"></ion-icon>
        <ion-label>Mi cuenta</ion-label>
      </ion-item>

      <!-- Opción 10 -->
      <ion-item routerLink="/ayuda" lines="none">
        <ion-icon name="help-circle-outline" slot="start"></ion-icon>
        <ion-label>Ayuda</ion-label>
      </ion-item>

      <!-- Sección 2 -->
      <ion-item routerLink="/moda" lines="none">
        <ion-icon name="shirt-outline" slot="start"></ion-icon>
        <ion-label>Moda</ion-label>
      </ion-item>

      <ion-item routerLink="/stores-tabs" lines="none" (click)="closeMenu()">
        <ion-icon name="storefront-outline" slot="start"></ion-icon>
        <ion-label>Tiendas oficiales</ion-label>
      </ion-item>

      <ion-item routerLink="/categories" lines="none" (click)="closeMenu()">
        <ion-icon name="list-outline" slot="start"></ion-icon>
        <ion-label>Categorías</ion-label>
      </ion-item>

    </ion-list>
  </ion-content>
</ion-menu>

<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button menu="first"></ion-menu-button> <!-- Botón para abrir el menú -->
    </ion-buttons>

    <ion-searchbar placeholder="Buscar en OneClic..." debounce="500" showCancelButton="never"
      search-icon="search-outline" slot="primary" class="custom-searchbar">
    </ion-searchbar>

    <ion-buttons slot="end">
      <ion-button>
        <ion-icon slot="icon-only" name="bag-outline"></ion-icon> <!-- Ícono de carrito -->
      </ion-button>
    </ion-buttons>
    <ion-progress-bar type="indeterminate" *ngIf="isLoading"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content id="main-content" [fullscreen]="true" color="light" class="ion-padding">

  <ion-refresher slot="fixed" (ionRefresh)="refreshData($event)">
    <ion-refresher-content pullingText="Tira para refrescar" refreshingSpinner="crescent"></ion-refresher-content>
  </ion-refresher>

  <!-- Slider de Banners -->
  <swiper-container [loop]="true" [pagination]="true">
    <swiper-slide *ngFor="let banner of banners">
      <img [src]="apiService.getOptimizedImageUrl(banner.folder, banner.img, 'banner')" class="banner-img-placeholder"
        loading="lazy" [class.hidden]="banner.logoLoaded">
      <img [src]="banner.img" class="banner-img" loading="lazy" (load)="banner.logoLoaded = true" />
    </swiper-slide>
  </swiper-container>

  <!-- Swiper con Lives (Historias) -->
  <div class="lives-container">

    <div class="live-content">
      <div class="live-story-all">
        <img src="assets/images/live.webp">
        <p>Ver Todos</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 1</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 2</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 3</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 4</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 5</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 6</p>
      </div>
      <div class="live-story">
        <img src="assets/images/user-placeholder.webp">
        <p>Tienda 7</p>
      </div>
      <!-- Agrega más ion-slide si es necesario -->
    </div>
  </div>

  <!-- Últimas Tiendas Registradas -->
  <ion-grid>

    <div class="title-card">
      <h5>New Arrivals</h5><span routerLink="/stores-tabs">Ver todo <ion-icon
          name="chevron-forward-outline"></ion-icon></span>
    </div>

    <ion-row>
      <ion-col size="6" *ngFor="let comercio of comercios">
        <div class="tienda-card">
          <img [src]="serverUrl + comercio.logo" alt="{{ comercio.nombre }}">
          <p>{{ comercio.nombre }}</p>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Swiper con Categorías -->
  <hr>

  <div class="title-card">
    <h5>Categorías Destacadas</h5><span>Ver todo <ion-icon name="chevron-forward-outline"></ion-icon></span>
  </div>

  <div class="categories">
    <div class="category" *ngFor="let categoria of categorias">
      <img src="{{ categoria.icono }}" alt="{{ categoria.categoria }}">
      <p>{{ categoria.categoria }}</p>
    </div>
  </div>

  <ion-fab slot="fixed" vertical="bottom" horizontal="end" color="dark">
    <ion-fab-button>
      <ion-icon name="add-outline"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button routerLink="/stores-tabs">
        <ion-icon name="storefront-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button>
        <ion-icon name="cloud-upload-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button>
        <ion-icon name="pricetags-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>

</ion-content>